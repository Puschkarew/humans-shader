---
date: 2026-02-11
topic: glass-lines-overlay-brightness-reactive
---

# Glass Lines Overlay (Brightness-Reactive)

## What We're Building
Добавляем новый художественный фильтр "вертикальные линии стекла" поверх всего финального кадра (full-frame overlay), как в референсном видео. Фильтр должен включаться отдельным чекбоксом в текущей панели управления эффектами.

Для MVP интенсивность линий должна линейно зависеть от яркости: чем ярче область кадра, тем заметнее линии. Пользователь получает расширенный набор настроек для художественного контроля:
- `Glass Lines Enabled`
- `Brightness Influence`
- `Line Strength`
- `Line Width/Spacing`

Поведение состояния фильтра соответствует текущей логике панели: значения не привязаны к жесткому дефолту "on/off", а восстанавливаются из последнего сохраненного состояния пользователя.

## Why This Approach
Выбран подход B: overlay-фильтр с легкой "оптической неровностью" линий для более правдоподобного ощущения стекла.

Подход A слишком утилитарный и может выглядеть плоско. Подход C дает максимум контроля, но для текущей задачи создает лишнюю сложность (YAGNI) и перегружает интерфейс. Подход B дает лучший баланс между выразительностью, простотой управления и скоростью итераций.

## Key Decisions
- Эффект применяется ко всему кадру, не только к частице.
- Основной драйвер для MVP: яркость (без зависимости от скорости).
- Реакция на яркость: линейная.
- Контролы: `Enabled`, `Brightness Influence`, `Line Strength`, `Line Width/Spacing`.
- Состояние контролов: восстановление последнего выбора пользователя.
- Визуальный характер: не "чистая маска", а слегка неровная стеклянная структура.

## Open Questions
- Легкая оптическая неровность должна быть всегда включена или иметь отдельный пользовательский параметр?
- Нужен ли быстрый режим/ограничение качества для слабых устройств?
- Какой набор эталонных сцен использовать для визуальной приемки (кадры из видео/живой превью-сравнитель)?
- Должен ли фильтр вести себя идентично в статичном режиме и в анимации?

## Next Steps
→ `/prompts:workflows-plan` для детализации реализации, критериев приемки и проверки без регрессий.
