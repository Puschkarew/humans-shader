---
date: 2026-02-11
topic: particle-color-falloff
---

# Particle Color and Edge Falloff

## What We're Building
Обновление визуального поведения частиц в текущей WebGL-сцене, чтобы цвет центра воспринимался корректно и переход к краю был управляемым и более плавным. Основная проблема: при выборе белого цвета центра частица визуально не выглядит белой из-за текущего пайплайна смешивания; дополнительно текущий переход к краю кажется слишком резким/непредсказуемым.

Целевое поведение:
- При выборе центра `#FFFFFF` ядро частицы выглядит белым для глаза.
- Лёгкая художественная подкраска допустима.
- Переход к цвету края можно гибко настраивать в широком диапазоне: от более резкого до очень мягкого.

Критерии успеха:
- Центр при `#FFFFFF` визуально читается как белый в статике и в движении.
- `Edge Smoothness` даёт заметный и управляемый диапазон: от более резкой до очень мягкой кромки.
- `Softness` и `Edge Smoothness` воспринимаются как разные по назначению настройки.

## Why This Approach
Выбран подход A: разделить ответственность параметров и добавить отдельный контроль плавности края (`Edge Smoothness`), сохранив существующий `Softness` для общей формы/профиля частицы.

Почему это лучший вариант:
- Даёт предсказуемость: пользователь отдельно управляет формой и отдельно переходом к краю.
- Решает обе цели одновременно: белый центр и контролируемый edge-falloff.
- Подходит под запрос на максимальный контроль диапазона, а не только “стало чуть мягче”.

Альтернативы (только усилить `Softness` или использовать пресеты) проще в UI, но ограничивают точный арт-контроль и хуже подходят под текущий запрос.

## Key Decisions
- Ввести отдельный параметр `Edge Smoothness`: нужен широкий диапазон художественной настройки границы.
- Сохранить `Softness` как отдельный существующий контрол: не смешивать две разные задачи в одном параметре.
- Зафиксировать UX-правило для центра: при выборе белого центр должен восприниматься белым, допускается лишь лёгкий tint.
- Ориентироваться на YAGNI: без добавления лишних режимов/пресетов на этом этапе.

## Open Questions
- Нужны ли явные описания диапазона для `Edge Smoothness` в UI (например, “Sharp ↔ Dreamy”) или достаточно числового значения?
- Нужно ли добавить короткий helper-текст в панели, объясняющий разницу между `Softness` и `Edge Smoothness`?
- Нужен ли референс-скриншот как стандарт визуальной приемки для “белого” центра?

## Next Steps
→ `/prompts:workflows-plan` для проработки реализации и проверки результата по зафиксированным критериям.
